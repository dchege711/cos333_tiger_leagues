{% extends "base.html" %}

{% block content %}
    <style>
        input {
            margin: 2%;
            border: none;
            border-bottom: thin solid rgb(180, 178, 178);
        }

        input[type="text"] {
            width: 100%;
        }

    </style>

    <div class="w3-container">

        <h3 class="w3-container">{% block title %}Create League{% endblock %}</h3>

        <div class="w3-container">

            <form class="w3-container" id="create_league_form" action="league/create" method="POST">
                <h5>Tell us more about your league</h5>
                <hr>

                <label for="league_name">What is the name of the league?</label>
                <input 
                    type="text" name="league_name" id="league_name" maxlength="20" required>
                <br>

                <label for="league_description">Describe the league in 1-3 sentences</label>
                <br>
                <input id="league_description" type="text" name="league_description">
                <br>

                <label for="points_per_win">How many points is a win worth?</label>
                <input 
                    type="number" name="points_per_win" id="points_per_win" required>
                <br>

                <label for="points_per_draw">How many points is a draw worth?</label>
                <input 
                    type="number" name="points_per_draw" id="points_per_draw" required>
                <br>

                <label for="points_per_loss">How many points is a loss worth?</label>
                <input 
                    type="number" name="points_per_loss" id="points_per_loss" required>
                <br>
                <br>

                <p><strong>Indicate if you need any of this information...</strong></p>
                <input type="checkbox" id="need_phone_num" name="need_phone_num">
                <label for="need_phone_num">Phone Number</label>
                <br>

                <input type="checkbox" id="need_room_num" name="need_room_num">
                <label for="need_room_num">Campus Room (e.g. Henry Hall 115)</label>
                <br>
                <hr>

                <div id="additional_questions_container"></div>

                <input class="w3-btn w3-green" type="submit" value="Create League">

            </form>
            
            <hr>
            <div class="w3-container">

                <p><strong>Add a question that you'd like players to answer before they join</strong></p>
                <hr>

                <p>Question</p>
                <input type="text" placeholder="e.g. Which type of console do you have?" id="additional_question" value="Which console do you have?">
                <br>

                <p>Valid Responses (separate them using comas)</p>
                <input type="text" placeholder="e.g. Xbox One, PlayStation 4, None" id="valid_responses" value="Xbox One, PlayStation 4, None">
                <br>

                <button class="w3-btn w3-blue" onclick="addNewQuestion()">Add Field</button>

            </div>
            <hr>

        </div>
        
    </div>

    <script>

        let state = {
            additionalQsnID: 0
        }

        function addNewQuestion() {
            let question =  document.getElementById("additional_question").value;
            let validOptions = document.getElementById("valid_responses").value.split(",");
            let validOptionsHTML = "";
            for (let i = 0; i < validOptions.length; i++) {
                validOption = validOptions[i].trim();
                validOptionsHTML += `<input type='checkbox' name='${validOption}'><label for='${validOption}'> ${validOption}</label><br>`;
            }

            document.getElementById("additional_questions_container").insertAdjacentHTML(
                "beforeend",
                `<div id='extraQsn${state.additionalQsnID}'>
                    <div>
                        <button 
                            onclick="document.getElementById('additional_questions_container').removeChild(document.getElementById('extraQsn${state.additionalQsnID}'));"
                            class='w3-button w3-hover-red w3-right'>Delete Field
                        </button>
                    </div>
                <p><strong>${question}</strong></p>${validOptionsHTML}<hr></div>`
            );

            state.additionalQsnID = state.additionalQsnID + 1;
            
        }
    </script>

{% endblock %}